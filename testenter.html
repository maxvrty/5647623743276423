<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Отправка Telegram ID</title>
</head>
<body>
    <!-- Форма с полем ввода для Telegram ID и кнопкой для отправки -->
    <form id="tgForm">
        <input type="text" id="tgId" name="telegramId" placeholder="Введите ваш Telegram ID">
        <button type="submit" onclick="sendTgId(event)">Отправить</button>
    </form>

    <script>
        // Функция для отправки Telegram ID на сервер
        function sendTgId(event) {
            // Предотвращение стандартного поведения формы
            event.preventDefault();

            // Получение Telegram ID из поля ввода
            const tgId = document.getElementById('tgId').value;

            // Проверка наличия Telegram Web App и получение данных пользователя
            if (window.Telegram.WebApp) {
                Telegram.WebApp.ready();
                const tgUser = Telegram.WebApp.initDataUnsafe.user;
                if (tgUser) {
                    // Использование ID пользователя из Telegram Web App
                    tgId = tgUser.id;
                }
            }

            // Отправка ID на сервер
            fetch('https://a2a4-89-22-177-227.ngrok-free.app/receive_tg_id', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ telegramId: tgId }),
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
            })
            .catch((error) => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>